import{d as V,r as v,e as $,c as o,a as t,h as U,w as d,i as c,F as b,b as y,v as f,l as P,t as a,m as _,o as u,_ as D}from"./index-B7edlyl5.js";const G={class:"api-support"},L={class:"content"},O={class:"row"},A={class:"col col-12"},I={class:"box-card"},B={class:"card-header"},M=["value"],z={class:"card-content"},F={class:"table"},N=["onClick"],R=["onClick"],j=["onClick"],q={class:"col col-12"},H={class:"box-card"},J={class:"card-content"},K={key:0,class:"form"},Q={class:"form-item"},W={class:"form-item"},X=["value"],Y={class:"form-item"},Z={class:"form-item"},tt={class:"form-item"},lt={class:"form-item"},et={class:"switch"},st={class:"switch-label"},nt={key:1,class:"empty-state"},at={key:0,class:"test-dialog-mask"},ot={class:"test-dialog"},ut=V({__name:"ApiSupportView",setup(it){const p=["数据获取","回灌控制","可视化截屏","其他"],i=v([{name:"获取测试数据",type:"数据获取",method:"GET",url:"/api/test-data",desc:"自动化获取测试数据，支持下载、读取、解构",status:"active"},{name:"提交测试结果",type:"数据获取",method:"POST",url:"/api/test-results",desc:"自动化提交测试结果，支持数据归档",status:"active"},{name:"回灌仿真启动",type:"回灌控制",method:"POST",url:"/api/replay/start",desc:"自动化启动回灌仿真",status:"active"},{name:"回灌仿真暂停",type:"回灌控制",method:"POST",url:"/api/replay/pause",desc:"自动化暂停回灌仿真",status:"active"},{name:"回灌仿真停止",type:"回灌控制",method:"POST",url:"/api/replay/stop",desc:"自动化停止回灌仿真",status:"active"},{name:"回灌进度查询",type:"回灌控制",method:"GET",url:"/api/replay/progress",desc:"自动化查询回灌仿真进度",status:"active"},{name:"可视化窗口截屏",type:"可视化截屏",method:"GET",url:"/api/visualization/screenshot",desc:"自动化获取仿真可视化窗口截图",status:"active"}]),r=v(""),k=$(()=>r.value?i.value.filter(n=>n.type===r.value):i.value),s=v(null),C=()=>{s.value={name:"",type:p[0],method:"GET",url:"",desc:"",status:"active"}},x=n=>{s.value={...n}},E=n=>{i.value=i.value.filter(l=>l!==n)},g=()=>{if(s.value){const n=i.value.findIndex(l=>l.name===s.value.name);n>-1?i.value[n]={...s.value}:i.value.push({...s.value}),s.value=null}},m=v(!1),h=v(""),w=n=>{h.value=`接口名称: ${n.name}
类型: ${n.type}
方法: ${n.method}
地址: ${n.url}
说明: ${n.desc}
状态: ${n.status}

返回示例: {
  code: 0,
  msg: 'success',
  data: {...}
}`,m.value=!0};return(n,l)=>(u(),o("div",G,[l[23]||(l[23]=t("h1",null,"接口支持模块",-1)),t("div",L,[t("div",O,[t("div",A,[t("div",I,[t("div",B,[l[9]||(l[9]=t("span",null,"接口列表",-1)),d(t("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),class:"select-type"},[l[8]||(l[8]=t("option",{value:""},"全部类型",-1)),(u(),o(b,null,y(p,e=>t("option",{key:e,value:e},a(e),9,M)),64))],512),[[c,r.value]]),t("button",{class:"btn btn-primary btn-small",onClick:C},"添加接口")]),t("div",z,[t("table",F,[l[10]||(l[10]=t("thead",null,[t("tr",null,[t("th",null,"接口名称"),t("th",{style:{width:"120px"}},"接口类型"),t("th",{style:{width:"100px"}},"请求方法"),t("th",{style:{width:"220px"}},"接口说明"),t("th",{style:{width:"100px"}},"状态"),t("th",{style:{width:"260px"}},"操作")])],-1)),t("tbody",null,[(u(!0),o(b,null,y(k.value,(e,S)=>(u(),o("tr",{key:S},[t("td",null,a(e.name),1),t("td",null,a(e.type),1),t("td",null,[t("span",{class:_(["tag","tag-"+e.method.toLowerCase()])},a(e.method),3)]),t("td",null,a(e.desc),1),t("td",null,[t("span",{class:_(["tag",e.status==="active"?"tag-success":"tag-info"])},a(e.status==="active"?"启用":"禁用"),3)]),t("td",null,[t("button",{class:"btn btn-small",onClick:T=>x(e)},"编辑",8,N),t("button",{class:"btn btn-danger btn-small",onClick:T=>E(e)},"删除",8,R),t("button",{class:"btn btn-primary btn-small",onClick:T=>w(e)},"测试",8,j)])]))),128))])])])])]),t("div",q,[t("div",H,[l[20]||(l[20]=t("div",{class:"card-header"},[t("span",null,"接口详情")],-1)),t("div",J,[s.value?(u(),o("form",K,[t("div",Q,[l[11]||(l[11]=t("label",null,"接口名称",-1)),d(t("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>s.value.name=e)},null,512),[[f,s.value.name]])]),t("div",W,[l[12]||(l[12]=t("label",null,"接口类型",-1)),d(t("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>s.value.type=e)},[(u(),o(b,null,y(p,e=>t("option",{key:e,value:e},a(e),9,X)),64))],512),[[c,s.value.type]])]),t("div",Y,[l[14]||(l[14]=t("label",null,"请求方法",-1)),d(t("select",{"onUpdate:modelValue":l[3]||(l[3]=e=>s.value.method=e)},l[13]||(l[13]=[t("option",{value:"GET"},"GET",-1),t("option",{value:"POST"},"POST",-1),t("option",{value:"PUT"},"PUT",-1),t("option",{value:"DELETE"},"DELETE",-1)]),512),[[c,s.value.method]])]),t("div",Z,[l[15]||(l[15]=t("label",null,"接口地址",-1)),d(t("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>s.value.url=e)},null,512),[[f,s.value.url]])]),t("div",tt,[l[16]||(l[16]=t("label",null,"接口说明",-1)),d(t("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>s.value.desc=e)},null,512),[[f,s.value.desc]])]),t("div",lt,[l[18]||(l[18]=t("label",null,"状态",-1)),t("label",et,[d(t("input",{type:"checkbox","onUpdate:modelValue":l[6]||(l[6]=e=>s.value.status=e),"true-value":"active","false-value":"inactive"},null,512),[[P,s.value.status]]),l[17]||(l[17]=t("span",{class:"slider"},null,-1))]),t("span",st,a(s.value.status==="active"?"启用":"禁用"),1)]),t("div",{class:"form-item"},[t("button",{class:"btn btn-primary",type:"button",onClick:g},"保存")])])):(u(),o("div",nt,l[19]||(l[19]=[t("p",null,"请选择一个接口进行编辑",-1)])))])])])]),l[22]||(l[22]=t("div",{class:"automation-section card"},[t("h2",null,"自动化回灌测试接口说明"),t("ul",null,[t("li",null,"数据获取接口：支持自动化下载、读取、解构测试数据，适用于数据流转与自动化分析。"),t("li",null,"回灌控制接口：支持自动化启动、暂停、停止仿真，便于流程编排与CI集成。"),t("li",null,"可视化窗口截屏接口：支持自动化获取仿真画面，便于结果归档与对比。"),t("li",null,"所有接口均可通过RESTful方式集成到自动化测试系统、pipeline或CI/CD流程。")])],-1)),m.value?(u(),o("div",at,[t("div",ot,[l[21]||(l[21]=t("h3",null,"接口测试结果",-1)),t("pre",null,a(h.value),1),t("button",{class:"btn btn-primary btn-small",onClick:l[7]||(l[7]=e=>m.value=!1)},"关闭")])])):U("",!0)])]))}}),vt=D(ut,[["__scopeId","data-v-834c0e19"]]);export{vt as default};
