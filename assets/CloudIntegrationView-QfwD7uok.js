import{d as V,r as u,e as h,c as r,a as l,w as x,i as w,v as y,j as d,m as I,t as n,n as E,F as _,b as g,o as v,_ as B}from"./index-LzKsG0dd.js";const N={class:"closed-loop-sim"},R={class:"content"},T={class:"row"},U={class:"col col-12"},z={class:"box-card"},D={class:"card-content"},L={class:"form"},P={class:"form-item"},j={class:"form-item"},J={class:"form-item"},O={class:"form-item"},q=["disabled"],A=["disabled"],G=["disabled"],H={class:"sim-status-info"},K={class:"progress-bar"},Q={class:"col col-12"},W={class:"box-card"},X={class:"card-header"},Y=["disabled"],Z={class:"card-content"},$={class:"feedback-section"},ll={class:"signal-list"},sl={class:"state-list"},tl={class:"analysis-section"},el={class:"analysis-table"},nl=V({__name:"CloudIntegrationView",setup(ol){const i=u({model:"bicycle",duration:60,step:10}),t=u("idle"),a=u(0),S=h(()=>t.value==="idle"?"就绪":t.value==="running"?"运行中":t.value==="paused"?"已暂停":t.value==="completed"?"已完成":"");let m=null;const p=u([]),b=u([]),c=u({maxError:.25,avgError:.12,successRate:98.5}),C=()=>{t.value="running",a.value=0,p.value=[],b.value=[];let o=0;m=setInterval(()=>{t.value==="running"&&(o+=i.value.step/1e3,a.value=Math.min(100,Math.round(o/i.value.duration*100)),p.value.push({time:o.toFixed(2),steer:(Math.sin(o)*10).toFixed(2),acc:(Math.cos(o)*2).toFixed(2)}),b.value.push({time:o.toFixed(2),x:(o*2).toFixed(2),y:(Math.sin(o)*5).toFixed(2),v:(10+Math.cos(o)).toFixed(2),error:Math.abs(Math.sin(o)/4).toFixed(3)}),a.value>=100&&(t.value="completed",clearInterval(m)))},i.value.step)},F=()=>{t.value==="running"&&(t.value="paused")},M=()=>{t.value="idle",a.value=0,clearInterval(m)},k=()=>{alert("导出仿真结果（可扩展为下载CSV/JSON等）")};return(o,s)=>(v(),r("div",N,[s[22]||(s[22]=l("h1",null,"闭环回归仿真模块",-1)),l("div",R,[l("div",T,[l("div",U,[l("div",z,[s[8]||(s[8]=l("div",{class:"card-header"},[l("span",null,"仿真参数设置")],-1)),l("div",D,[l("form",L,[l("div",P,[s[4]||(s[4]=l("label",null,"动力学模型",-1)),x(l("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>i.value.model=e)},s[3]||(s[3]=[l("option",{value:"bicycle"},"自行车模型",-1),l("option",{value:"point"},"质点模型",-1),l("option",{value:"full"},"全车模型",-1)]),512),[[w,i.value.model]])]),l("div",j,[s[5]||(s[5]=l("label",null,"仿真时长（秒）",-1)),x(l("input",{type:"number","onUpdate:modelValue":s[1]||(s[1]=e=>i.value.duration=e),min:"1",max:"600"},null,512),[[y,i.value.duration]])]),l("div",J,[s[6]||(s[6]=l("label",null,"步长（ms）",-1)),x(l("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=e=>i.value.step=e),min:"1",max:"100"},null,512),[[y,i.value.step]])]),l("div",O,[l("button",{class:"btn btn-primary",type:"button",onClick:C,disabled:t.value==="running"},"启动仿真",8,q),l("button",{class:"btn",type:"button",onClick:F,disabled:t.value!=="running"},"暂停",8,A),l("button",{class:"btn",type:"button",onClick:M,disabled:t.value==="idle"},"停止",8,G)])]),l("div",H,[l("p",null,[s[7]||(s[7]=d("仿真状态：")),l("span",{class:I(["status-badge",t.value])},n(S.value),3)]),l("p",null,"仿真进度："+n(a.value)+"%",1)]),l("div",K,[l("div",{class:"progress",style:E({width:a.value+"%"})},null,4)])])])]),l("div",Q,[l("div",W,[l("div",X,[s[9]||(s[9]=l("span",null,"实时反馈与轨迹分析",-1)),l("button",{class:"btn btn-primary btn-small",onClick:k,disabled:t.value!=="completed"},"导出结果",8,Y)]),l("div",Z,[l("div",$,[s[15]||(s[15]=l("h4",null,"控制信号",-1)),l("div",ll,[(v(!0),r(_,null,g(p.value,(e,f)=>(v(),r("div",{key:f,class:"signal-item"},[l("span",null,n(e.time)+"s",1),s[10]||(s[10]=d(" | ")),l("span",null,"转向: "+n(e.steer),1),s[11]||(s[11]=d(" | ")),l("span",null,"加速度: "+n(e.acc),1)]))),128))]),s[16]||(s[16]=l("h4",null,"车辆状态反馈",-1)),l("div",sl,[(v(!0),r(_,null,g(b.value,(e,f)=>(v(),r("div",{key:f,class:"state-item"},[l("span",null,n(e.time)+"s",1),s[12]||(s[12]=d(" | ")),l("span",null,"位置: ("+n(e.x)+", "+n(e.y)+")",1),s[13]||(s[13]=d(" | ")),l("span",null,"速度: "+n(e.v)+" m/s",1),s[14]||(s[14]=d(" | ")),l("span",null,"偏差: "+n(e.error)+" m",1)]))),128))])]),l("div",tl,[s[21]||(s[21]=l("h4",null,"轨迹追踪分析",-1)),l("div",el,[l("table",null,[s[20]||(s[20]=l("thead",null,[l("tr",null,[l("th",null,"指标"),l("th",null,"数值")])],-1)),l("tbody",null,[l("tr",null,[s[17]||(s[17]=l("td",null,"最大偏差",-1)),l("td",null,n(c.value.maxError)+" m",1)]),l("tr",null,[s[18]||(s[18]=l("td",null,"平均偏差",-1)),l("td",null,n(c.value.avgError)+" m",1)]),l("tr",null,[s[19]||(s[19]=l("td",null,"轨迹追踪成功率",-1)),l("td",null,n(c.value.successRate)+"%",1)])])])])])])])])])])]))}}),al=B(nl,[["__scopeId","data-v-bf2b25e6"]]);export{al as default};
