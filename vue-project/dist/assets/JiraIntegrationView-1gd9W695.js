import{d as D,r as p,c as o,a as t,h as T,p as y,k as _,w as e,v as u,i as m,F as x,b as k,t as i,m as j,o as n,_ as O}from"./index-B7edlyl5.js";const B={class:"jira-integration"},$={class:"row"},M={class:"col col-8"},z={class:"box-card"},K={class:"card-content"},L={class:"form-item"},h={class:"form-item"},F={class:"form-item"},N={class:"col col-16"},R={class:"box-card"},H={class:"card-header"},E={style:{"margin-left":"auto",display:"flex",gap:"10px"}},q={class:"card-content"},G={class:"filter-bar"},Q={class:"filter-item"},W={class:"filter-item"},X={class:"filter-item"},Y={key:0,class:"empty"},Z={key:1,class:"table"},tt={class:"action-btns"},st=["onClick"],at=["onClick"],lt={class:"box-card",style:{"margin-top":"20px"}},et={class:"card-content"},ot={key:0,class:"empty"},nt={key:1,class:"table"},it={class:"action-btns"},dt=["onClick"],vt=["onClick"],rt={key:0,class:"modal"},ut={class:"modal-content"},pt={class:"modal-header"},ct={class:"modal-body"},mt={class:"form"},bt={class:"form-item"},yt={class:"form-item"},ft={class:"form-item"},gt={class:"form-item"},xt={class:"form-item"},kt={class:"form-item"},It={class:"modal-footer"},wt=D({__name:"JiraIntegrationView",setup(Ct){const v=p({username:"",token:"",domain:""}),r=p({project:"",status:"",module:""}),f=p([{key:"SADP-101",summary:"Perception模块路标检测功能测试",status:"待测试",module:"perception",version:"v2.5.0",assignee:"张三",bagInfo:"bag-20230615-101, bag-20230615-102",description:"测试路标检测功能在不同光照条件下的准确性"},{key:"SADP-102",summary:"Planning模块避障功能测试",status:"测试中",module:"planning",version:"v2.5.0",assignee:"李四",bagInfo:"bag-20230620-305, bag-20230620-306",description:"验证动态避障功能在复杂场景下的表现"},{key:"AUTO-103",summary:"Control模块弯道控制精度测试",status:"已完成",module:"control",version:"v2.4.8",assignee:"王五",bagInfo:"bag-20230610-201",description:"测试在不同弯道半径下的控制精度"}]),g=p([{name:"Perception模块路标检测测试报告",issueKey:"SADP-101",module:"perception",createdAt:"2023-06-20 15:30:45",url:"#"},{name:"Planning模块避障功能中期报告",issueKey:"SADP-102",module:"planning",createdAt:"2023-06-22 10:15:22",url:"#"},{name:"Control模块弯道控制测试报告",issueKey:"AUTO-103",module:"control",createdAt:"2023-06-18 09:45:37",url:"#"}]),c=p(!1),l=p({project:"SADP",summary:"",module:"",version:"",bagInfo:"",description:""}),I=()=>{console.log("绑定Jira账号",v.value)},w=()=>{console.log("同步Jira issue")},C=()=>{console.log("应用筛选",r.value)},A=d=>{console.log("查看Issue详情",d)},P=d=>{console.log("推送报告到Jira issue",d)},U=d=>{console.log("查看报告",d)},J=d=>{console.log("推送报告至Jira",d)},V=()=>{console.log("创建Issue",l.value),c.value=!1};return(d,s)=>(n(),o("div",B,[s[41]||(s[41]=t("h1",null,"Jira集成模块",-1)),s[42]||(s[42]=t("div",{class:"desc"},[t("div",{class:"alert-info"},[t("span",{class:"alert-icon"},"ℹ️"),t("span",null,"通过Jira进行提测管理，记录版本和bag信息，自动将HTML测试报告推送至对应Issue")])],-1)),t("div",$,[t("div",M,[t("div",z,[s[19]||(s[19]=t("div",{class:"card-header"},[t("span",{style:{"font-size":"18px"}},"🔗"),t("span",{style:{"margin-left":"8px"}},"Jira账号绑定")],-1)),t("div",K,[t("form",{class:"form",onSubmit:_(I,["prevent"])},[t("div",L,[s[15]||(s[15]=t("label",null,"用户名",-1)),e(t("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>v.value.username=a),placeholder:"Jira用户名"},null,512),[[u,v.value.username]])]),t("div",h,[s[16]||(s[16]=t("label",null,"API Token",-1)),e(t("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>v.value.token=a),placeholder:"Jira API Token",type:"password"},null,512),[[u,v.value.token]])]),t("div",F,[s[17]||(s[17]=t("label",null,"Jira域名",-1)),e(t("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>v.value.domain=a),placeholder:"如 your-domain.atlassian.net"},null,512),[[u,v.value.domain]])]),s[18]||(s[18]=t("div",{class:"form-item"},[t("button",{class:"btn btn-primary",type:"submit"},"绑定账号")],-1))],32)])]),s[20]||(s[20]=y('<div class="box-card" style="margin-top:20px;" data-v-c526a552><div class="card-header" data-v-c526a552><span style="font-size:18px;" data-v-c526a552>ℹ️</span><span style="margin-left:8px;" data-v-c526a552>提测管理流程</span></div><div class="card-content" data-v-c526a552><div class="process-diagram" data-v-c526a552><div class="process-step" data-v-c526a552><div class="step-icon" data-v-c526a552>1</div><div class="step-text" data-v-c526a552>绑定Jira账号</div></div><div class="process-arrow" data-v-c526a552>→</div><div class="process-step" data-v-c526a552><div class="step-icon" data-v-c526a552>2</div><div class="step-text" data-v-c526a552>创建提测Issue</div></div><div class="process-arrow" data-v-c526a552>→</div><div class="process-step" data-v-c526a552><div class="step-icon" data-v-c526a552>3</div><div class="step-text" data-v-c526a552>执行自动化测试</div></div><div class="process-arrow" data-v-c526a552>→</div><div class="process-step" data-v-c526a552><div class="step-icon" data-v-c526a552>4</div><div class="step-text" data-v-c526a552>结果自动回传</div></div></div><div class="feature-list" data-v-c526a552><div class="feature-item" data-v-c526a552><span class="feature-icon" data-v-c526a552>✓</span><span data-v-c526a552>支持版本与bag信息自动记录</span></div><div class="feature-item" data-v-c526a552><span class="feature-icon" data-v-c526a552>✓</span><span data-v-c526a552>HTML报告自动推送至Jira评论区</span></div><div class="feature-item" data-v-c526a552><span class="feature-icon" data-v-c526a552>✓</span><span data-v-c526a552>提测状态实时追踪与反馈</span></div><div class="feature-item" data-v-c526a552><span class="feature-icon" data-v-c526a552>✓</span><span data-v-c526a552>与场景库和数据管理系统集成</span></div></div></div></div>',1))]),t("div",N,[t("div",R,[t("div",H,[s[21]||(s[21]=t("span",{style:{"font-size":"18px"}},"🎫",-1)),s[22]||(s[22]=t("span",{style:{"margin-left":"8px"}},"Jira Issue 管理",-1)),t("div",E,[t("button",{class:"btn btn-default btn-small",onClick:s[3]||(s[3]=a=>c.value=!0)},"创建Issue"),t("button",{class:"btn btn-primary btn-small",onClick:w},"同步Jira")])]),t("div",q,[t("div",G,[t("div",Q,[s[24]||(s[24]=t("label",null,"项目:",-1)),e(t("select",{"onUpdate:modelValue":s[4]||(s[4]=a=>r.value.project=a)},s[23]||(s[23]=[t("option",{value:""},"全部",-1),t("option",{value:"SADP"},"SADP",-1),t("option",{value:"AUTO"},"AUTO",-1)]),512),[[m,r.value.project]])]),t("div",W,[s[26]||(s[26]=t("label",null,"状态:",-1)),e(t("select",{"onUpdate:modelValue":s[5]||(s[5]=a=>r.value.status=a)},s[25]||(s[25]=[t("option",{value:""},"全部",-1),t("option",{value:"待测试"},"待测试",-1),t("option",{value:"测试中"},"测试中",-1),t("option",{value:"已完成"},"已完成",-1)]),512),[[m,r.value.status]])]),t("div",X,[s[28]||(s[28]=t("label",null,"模块:",-1)),e(t("select",{"onUpdate:modelValue":s[6]||(s[6]=a=>r.value.module=a)},s[27]||(s[27]=[y('<option value="" data-v-c526a552>全部</option><option value="perception" data-v-c526a552>Perception</option><option value="planning" data-v-c526a552>Planning</option><option value="control" data-v-c526a552>Control</option><option value="prediction" data-v-c526a552>Prediction</option>',5)]),512),[[m,r.value.module]])]),t("button",{class:"btn btn-small",onClick:C},"筛选")]),f.value.length===0?(n(),o("div",Y,"暂无Issue数据，点击同步Jira获取最新Issue。")):(n(),o("table",Z,[s[29]||(s[29]=t("thead",null,[t("tr",null,[t("th",{style:{width:"100px"}},"Key"),t("th",null,"标题"),t("th",{style:{width:"100px"}},"状态"),t("th",{style:{width:"100px"}},"模块"),t("th",{style:{width:"100px"}},"版本"),t("th",{style:{width:"150px"}},"操作")])],-1)),t("tbody",null,[(n(!0),o(x,null,k(f.value,a=>(n(),o("tr",{key:a.key},[t("td",null,i(a.key),1),t("td",null,i(a.summary),1),t("td",null,[t("span",{class:j(["status-badge",a.status.toLowerCase().replace(" ","-")])},i(a.status),3)]),t("td",null,i(a.module),1),t("td",null,i(a.version),1),t("td",null,[t("div",tt,[t("button",{class:"btn btn-small",title:"查看详情",onClick:b=>A(a)},"查看",8,st),t("button",{class:"btn btn-success btn-small",title:"推送测试报告到该Issue",onClick:b=>P(a)},"推送报告",8,at)])])]))),128))])]))])]),t("div",lt,[s[31]||(s[31]=t("div",{class:"card-header"},[t("span",{style:{"font-size":"18px"}},"📊"),t("span",{style:{"margin-left":"8px"}},"测试报告管理")],-1)),t("div",et,[g.value.length===0?(n(),o("div",ot,"暂无测试报告数据")):(n(),o("table",nt,[s[30]||(s[30]=t("thead",null,[t("tr",null,[t("th",null,"报告名称"),t("th",{style:{width:"120px"}},"关联Issue"),t("th",{style:{width:"120px"}},"测试模块"),t("th",{style:{width:"150px"}},"生成时间"),t("th",{style:{width:"150px"}},"操作")])],-1)),t("tbody",null,[(n(!0),o(x,null,k(g.value,(a,b)=>(n(),o("tr",{key:b},[t("td",null,i(a.name),1),t("td",null,i(a.issueKey),1),t("td",null,i(a.module),1),t("td",null,i(a.createdAt),1),t("td",null,[t("div",it,[t("button",{class:"btn btn-small",title:"查看报告",onClick:S=>U(a)},"查看",8,dt),t("button",{class:"btn btn-primary btn-small",title:"推送到Jira",onClick:S=>J(a)},"推送",8,vt)])])]))),128))])]))])])])]),c.value?(n(),o("div",rt,[t("div",ut,[t("div",pt,[s[32]||(s[32]=t("h3",null,"创建提测Issue",-1)),t("button",{class:"close-btn",onClick:s[7]||(s[7]=a=>c.value=!1)},"×")]),t("div",ct,[t("form",mt,[t("div",bt,[s[34]||(s[34]=t("label",null,"项目",-1)),e(t("select",{"onUpdate:modelValue":s[8]||(s[8]=a=>l.value.project=a)},s[33]||(s[33]=[t("option",{value:"SADP"},"SADP",-1),t("option",{value:"AUTO"},"AUTO",-1)]),512),[[m,l.value.project]])]),t("div",yt,[s[35]||(s[35]=t("label",null,"标题",-1)),e(t("input",{"onUpdate:modelValue":s[9]||(s[9]=a=>l.value.summary=a),placeholder:"请输入Issue标题"},null,512),[[u,l.value.summary]])]),t("div",ft,[s[37]||(s[37]=t("label",null,"测试模块",-1)),e(t("select",{"onUpdate:modelValue":s[10]||(s[10]=a=>l.value.module=a)},s[36]||(s[36]=[y('<option value="perception" data-v-c526a552>Perception</option><option value="planning" data-v-c526a552>Planning</option><option value="control" data-v-c526a552>Control</option><option value="prediction" data-v-c526a552>Prediction</option><option value="road_model" data-v-c526a552>Road Model</option><option value="obsl" data-v-c526a552>OBSL</option><option value="active_safety" data-v-c526a552>Active Safety</option>',7)]),512),[[m,l.value.module]])]),t("div",gt,[s[38]||(s[38]=t("label",null,"软件版本",-1)),e(t("input",{"onUpdate:modelValue":s[11]||(s[11]=a=>l.value.version=a),placeholder:"如 v1.2.3"},null,512),[[u,l.value.version]])]),t("div",xt,[s[39]||(s[39]=t("label",null,"Bag信息",-1)),e(t("textarea",{"onUpdate:modelValue":s[12]||(s[12]=a=>l.value.bagInfo=a),placeholder:"请输入Bag ID或描述",rows:"3"},null,512),[[u,l.value.bagInfo]])]),t("div",kt,[s[40]||(s[40]=t("label",null,"描述",-1)),e(t("textarea",{"onUpdate:modelValue":s[13]||(s[13]=a=>l.value.description=a),placeholder:"请详细描述测试内容",rows:"4"},null,512),[[u,l.value.description]])])])]),t("div",It,[t("button",{class:"btn",onClick:s[14]||(s[14]=a=>c.value=!1)},"取消"),t("button",{class:"btn btn-primary",onClick:V},"创建")])])])):T("",!0)]))}}),Pt=O(wt,[["__scopeId","data-v-c526a552"]]);export{Pt as default};
